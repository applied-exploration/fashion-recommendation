MATCH (p:Customer {_id: '0'}) 
CALL apoc.path.subgraphAll(p, {relationshipFilter: 'BUYS', minLevel: 1, maxLevel: 3})
YIELD relationships
WHERE all(rel in relationships WHERE rel.train_mask = '1')
RETURN [r in relationships | [LABELS(STARTNODE(r))[0], STARTNODE(r)._id,ENDNODE(r)._id]] as arraysomething